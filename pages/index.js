import Head from "next/head";
import Link from "next/link";
import Header from "../components/Header";
import React, { useEffect, useRef, useState } from "react";
import Image from "next/image";
import Release from "../components/Release";
import fort from "/assets/share/Subtract.png";
import Reviews from "../components/Reviews";
import soa from "/assets/share/soa.png";
import vittorio from "/assets/share/vb.png";
import trinity from "/assets/share/ljt.png";
import Footer from "../components/Footer";
import About from "../components/About";
import Process from "../components/Process";
import gsap from "gsap";

const Forest = () => {
  return (
    <section className="forest_container">
      <Image src={fort} alt="alt" />
    </section>
  );
};

const Customers = () => {
  const icon1Ref = useRef(null);
  const icon2Ref = useRef(null);
  const icon3Ref = useRef(null);
  const titleRef = useRef(null);

  // Créez une fonction pour animer chaque icône

  useEffect(() => {
    // Créez un IntersectionObserver qui observe chaque icône
    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        // Si l'icône est visible dans la fenêtre, lancez l'animation
        if (entry.isIntersecting) {
          animateIcon(entry.target);
          // Désactivez l'observation de l'icône une fois l'animation terminée
          observer.unobserve(entry.target);
        }
      });
    });

    console.log(icon1Ref);

    // Observez chaque icône avec l'IntersectionObserver
    observer.observe(icon1Ref.current);
    observer.observe(icon2Ref.current);
    observer.observe(icon3Ref.current);
    observer.observe(titleRef.current);
  }, []);

  function animateIcon() {
    gsap.fromTo(
      icon1Ref.current,
      {
        y: 70,
      },
      {
        delay: 0.2,
        duration: 0.6,
        y: 0,
        opacity: 1,
        ease: "power2.out",
      }
    );
    gsap.fromTo(
      icon2Ref.current,
      {
        y: 70,
      },
      {
        delay: 0.4,
        duration: 0.6,
        y: 0,
        opacity: 1,
        ease: "power2.out",
      }
    );
    gsap.fromTo(
      icon3Ref.current,
      {
        y: 70,
      },
      {
        delay: 0.6,
        duration: 0.6,
        y: 0,
        opacity: 1,
        ease: "power2.out",
      }
    );
    gsap.fromTo(
      titleRef.current,
      {
        y: 70,
      },
      {
        delay: 0.2,
        duration: 0.6,
        y: 0,
        opacity: 1,
        ease: "power2.out",
      }
    );
  }

  return (
    <section className="customers">
      <div className="customers_container">
        <div className="hidden">
          <h2 ref={titleRef}>Nos Clients</h2>
        </div>
        <ul className="customers_content">
          <li>
            <Image ref={icon1Ref} src={vittorio} alt="alt" />
          </li>
          <li>
            <Image ref={icon2Ref} src={soa} alt="alt" />
          </li>
          <li>
            <Image ref={icon3Ref} src={trinity} alt="alt" />
          </li>
        </ul>
      </div>
    </section>
  );
};

const Contact = () => {
  return (
    <section className="contact">
      <div className="contact_content">
        <p>
          <span>Impressionnez par notre travail?</span>
          <span>Contactez-nous maintenant</span>
        </p>
        <button>Nous Contacter</button>
      </div>
    </section>
  );
};

function Home() {
  return (
    <>
      <Head>
        <title>Décor Ta Kaz | Menuiserie Artisanale</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <Header />

      <main className="main">
        <Release />
        <Process />
        <Forest />
        <Customers />
        <Reviews />
        <Contact />
        <Footer />
      </main>
    </>
  );
}

export default Home;
